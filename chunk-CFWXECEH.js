import{a as T,b as y}from"./chunk-QZKRYXYY.js";import{e as v,f as _}from"./chunk-OWUD5JOZ.js";import{Ba as b,Fa as c,Ra as l,Sa as r,Ta as i,Ya as x,Za as p,_a as h,ab as o,bb as d,cb as g,q as m,qa as a,wa as f}from"./chunk-PYGFWICC.js";function D(n,t){if(n&1&&(r(0,"div",8)(1,"h3",9),o(2,"Test Result:"),i(),r(3,"p",10),o(4),i()()),n&2){let e=p();a(4),d(e.testResult)}}function C(n,t){if(n&1&&(r(0,"p",15),o(1),i()),n&2){let e=p(2);a(),g("Details: ",e.errorDetails)}}function E(n,t){if(n&1&&(r(0,"div",11)(1,"h3",12),o(2,"API Error:"),i(),r(3,"p",13),o(4),i(),c(5,C,2,1,"p",14),i()),n&2){let e=p();a(4),d(e.apiError),a(),l("ngIf",e.errorDetails)}}function k(n,t){if(n&1&&(r(0,"div",16)(1,"h3",17),o(2,"Debug Info:"),i(),r(3,"pre",18),o(4),i()()),n&2){let e=p();a(4),d(e.debugInfo)}}var I=class n{constructor(t){this.http=t}testResult="";apiError="";errorDetails="";debugInfo="";isTesting=!1;buttonHover=!1;async onTestButtonClick(){this.isTesting=!0,this.testResult="",this.apiError="",this.errorDetails="",this.debugInfo="";try{let e=await m(this.http.get(`https://website-2eb58030.ich.rqh.mybluehost.me/website_2eb58030/test-db-connection.php?t=${Date.now()}`,{responseType:"json"}));console.log("Full API Response:",e),e.success?(this.testResult=`\u2705 ${e.message} - MySQL Version: ${e.queryResult?.mysql_version} - Current Time: ${e.queryResult?.current_time_value}`,e.testData&&e.testData.length>0&&(this.testResult+=` - Found ${e.testData.length} test records`),e.debug&&(this.debugInfo=JSON.stringify(e.debug,null,2))):(this.testResult=`\u274C ${e.message}`,this.apiError=e.error||"Unknown error occurred",e.debug&&(this.debugInfo=JSON.stringify(e.debug,null,2)))}catch(t){if(console.error("Full error object:",t),t instanceof T){if(this.testResult="\u274C HTTP Error occurred",this.apiError=`Status: ${t.status} - ${t.statusText}`,this.errorDetails=t.message,t.error)try{let e=typeof t.error=="string"?JSON.parse(t.error):t.error;this.debugInfo=JSON.stringify(e,null,2)}catch{this.debugInfo=t.error}}else this.testResult="\u274C Failed to connect to PHP backend",this.apiError=t.message||"Network error occurred"}finally{this.isTesting=!1}}static \u0275fac=function(e){return new(e||n)(f(y))};static \u0275cmp=b({type:n,selectors:[["app-testing-db"]],decls:13,vars:9,consts:[[2,"padding","20px","text-align","center","font-family","Arial, sans-serif"],[2,"font-size","24px","color","#333"],[2,"color","#666","margin-top","20px"],[2,"margin-top","30px"],[2,"padding","12px 24px","font-size","16px","background-color","#007bff","color","white","border","none","border-radius","6px","cursor","pointer","transition","background-color 0.3s",3,"click","mouseover","mouseleave","disabled"],["style","margin-top: 20px; padding: 15px; border-radius: 6px; background-color: #f8f9fa; border: 1px solid #dee2e6;",4,"ngIf"],["style","margin-top: 20px; padding: 15px; border-radius: 6px; background-color: #f8d7da; border: 1px solid #f5c6cb;",4,"ngIf"],["style","margin-top: 20px; padding: 15px; border-radius: 6px; background-color: #d1ecf1; border: 1px solid #bee5eb;",4,"ngIf"],[2,"margin-top","20px","padding","15px","border-radius","6px","background-color","#f8f9fa","border","1px solid #dee2e6"],[2,"margin-top","0","color","#495057"],[2,"color","#6c757d","margin","0"],[2,"margin-top","20px","padding","15px","border-radius","6px","background-color","#f8d7da","border","1px solid #f5c6cb"],[2,"margin-top","0","color","#721c24"],[2,"color","#721c24","margin","0"],["style","color: #721c24; margin: 5px 0 0 0; font-size: 12px;",4,"ngIf"],[2,"color","#721c24","margin","5px 0 0 0","font-size","12px"],[2,"margin-top","20px","padding","15px","border-radius","6px","background-color","#d1ecf1","border","1px solid #bee5eb"],[2,"margin-top","0","color","#0c5460"],[2,"color","#0c5460","margin","0","text-align","left","font-size","12px","white-space","pre-wrap"]],template:function(e,s){e&1&&(r(0,"div",0)(1,"h1"),o(2,"testingDB Page"),i(),r(3,"p",1),o(4,"hi how ya doing"),i(),r(5,"p",2),o(6,"This is the temporary landing page for testing."),i(),r(7,"div",3)(8,"button",4),x("click",function(){return s.onTestButtonClick()})("mouseover",function(){return s.buttonHover=!0})("mouseleave",function(){return s.buttonHover=!1}),o(9),i(),c(10,D,5,1,"div",5)(11,E,6,2,"div",6)(12,k,5,1,"div",7),i()()),e&2&&(a(8),h("background-color",s.buttonHover?"#0056b3":s.isTesting?"#6c757d":"#007bff")("cursor",s.isTesting?"not-allowed":"pointer"),l("disabled",s.isTesting),a(),g(" ",s.isTesting?"Testing...":"Test Database Connection"," "),a(),l("ngIf",s.testResult),a(),l("ngIf",s.apiError),a(),l("ngIf",s.debugInfo))},dependencies:[_,v],encapsulation:2})};export{I as TestingDbComponent};
