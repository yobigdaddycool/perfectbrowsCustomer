import{a as D,b as y}from"./chunk-CC3NB63I.js";import{e as v,f as T,g as _}from"./chunk-EQHS3YKI.js";import{Ba as h,Fa as g,Ra as l,Sa as o,Ta as i,Ya as f,Za as c,_a as m,ab as n,bb as u,cb as d,q as x,qa as r,wa as b}from"./chunk-APNY6UQH.js";function E(a,s){if(a&1&&(o(0,"div",11)(1,"h3",12),n(2,"Test Result:"),i(),o(3,"p",13),n(4),i()()),a&2){let e=c();r(4),u(e.testResult)}}function C(a,s){if(a&1&&(o(0,"p",18),n(1),i()),a&2){let e=c(2);r(),d("Details: ",e.errorDetails)}}function k(a,s){if(a&1&&(o(0,"div",14)(1,"h3",15),n(2,"API Error:"),i(),o(3,"p",16),n(4),i(),g(5,C,2,1,"p",17),i()),a&2){let e=c();r(4),u(e.apiError),r(),l("ngIf",e.errorDetails)}}function S(a,s){if(a&1&&(o(0,"div",19)(1,"h3",20),n(2,"Debug Info:"),i(),o(3,"pre",21),n(4),i()()),a&2){let e=c();r(4),u(e.debugInfo)}}function w(a,s){if(a&1&&(o(0,"tr",31)(1,"td",32),n(2),i(),o(3,"td",33),n(4),i(),o(5,"td",33),n(6),i(),o(7,"td",34),n(8),i()()),a&2){let e=s.$implicit,t=s.index,p=c(2);m("background-color",t%2===0?"#f8f9fa":"white"),r(2),d(" ",e.id," "),r(2),d(" ",e.name," "),r(2),d(" ",e.email," "),r(2),d(" ",p.formatDate(e.created_at)," ")}}function R(a,s){if(a&1&&(o(0,"div",3)(1,"h3",22),n(2),i(),o(3,"div",23)(4,"table",24)(5,"thead")(6,"tr",25)(7,"th",26),n(8,"ID"),i(),o(9,"th",26),n(10,"Name"),i(),o(11,"th",26),n(12,"Email"),i(),o(13,"th",26),n(14,"Created At"),i()()(),o(15,"tbody"),g(16,w,9,6,"tr",27),i()()(),o(17,"div",28)(18,"p",29)(19,"strong"),n(20,"Total Records:"),i(),n(21),o(22,"span",30)(23,"strong"),n(24,"Latest:"),i(),n(25),i()()()()),a&2){let e=c();r(2),d("Test Data Table (",e.testData.length," records)"),r(14),l("ngForOf",e.testData),r(5),d(" ",e.testData.length," "),r(4),d(" ",e.getLatestRecordDate())}}function A(a,s){a&1&&(o(0,"div",35)(1,"h3",36),n(2,"No Test Data Found"),i(),o(3,"p",37),n(4,"The test_data table exists but contains no records."),i()())}var I=class a{constructor(s){this.http=s}testResult="";apiError="";errorDetails="";debugInfo="";testData=[];hasTestDataLoaded=!1;isTesting=!1;buttonHover=!1;async callApi(s){this.isTesting=!0,this.testResult="",this.apiError="",this.errorDetails="",this.debugInfo="",s==="get-test-data"&&(this.hasTestDataLoaded=!0);try{let e=`https://website-2eb58030.ich.rqh.mybluehost.me/api.php?action=${s}&t=${Date.now()}`,t=await x(this.http.get(e,{responseType:"json"}));if(console.log("API Response:",t),t.success){if(this.testResult=`\u2705 ${t.message}`,s==="test-connection"&&t.data?.queryResult){let p=t.data.queryResult;this.testResult+=` - MySQL Version: ${p.mysql_version} - Current Time: ${p.current_time_value}`}s==="get-test-data"&&t.data?.testData&&(this.testData=t.data.testData,this.testResult+=` - Found ${this.testData.length} test records`),t.debug&&(this.debugInfo=JSON.stringify(t.debug,null,2))}else this.testResult=`\u274C ${t.message}`,this.apiError=t.error||"Unknown error occurred",t.debug&&(this.debugInfo=JSON.stringify(t.debug,null,2))}catch(e){if(console.error("API Error:",e),e instanceof D){if(this.testResult="\u274C HTTP Error occurred",this.apiError=`Status: ${e.status} - ${e.statusText}`,this.errorDetails=e.message,e.error)try{let t=typeof e.error=="string"?JSON.parse(e.error):e.error;this.debugInfo=JSON.stringify(t,null,2)}catch{this.debugInfo=e.error}}else this.testResult="\u274C Failed to connect to API",this.apiError=e.message||"Network error occurred"}finally{this.isTesting=!1}}async onTestButtonClick(){await this.callApi("test-connection")}async onGetTestDataClick(){await this.callApi("get-test-data")}formatDate(s){if(!s)return"N/A";try{return new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return s}}getLatestRecordDate(){if(this.testData.length===0)return"N/A";let s=this.testData[0];return this.formatDate(s.created_at)}static \u0275fac=function(e){return new(e||a)(b(y))};static \u0275cmp=h({type:a,selectors:[["app-testing-db"]],decls:17,vars:17,consts:[[2,"padding","20px","text-align","center","font-family","Arial, sans-serif"],[2,"font-size","24px","color","#333"],[2,"color","#666","margin-top","20px"],[2,"margin-top","30px"],[2,"padding","12px 24px","font-size","16px","background-color","#007bff","color","white","border","none","border-radius","6px","cursor","pointer","transition","background-color 0.3s",3,"click","mouseover","mouseleave","disabled"],[2,"padding","12px 24px","font-size","16px","background-color","#28a745","color","white","border","none","border-radius","6px","cursor","pointer","margin-left","10px","transition","background-color 0.3s",3,"click","disabled"],["style","margin-top: 20px; padding: 15px; border-radius: 6px; background-color: #f8f9fa; border: 1px solid #dee2e6;",4,"ngIf"],["style","margin-top: 20px; padding: 15px; border-radius: 6px; background-color: #f8d7da; border: 1px solid #f5c6cb;",4,"ngIf"],["style","margin-top: 20px; padding: 15px; border-radius: 6px; background-color: #d1ecf1; border: 1px solid #bee5eb;",4,"ngIf"],["style","margin-top: 30px;",4,"ngIf"],["style","margin-top: 20px; padding: 20px; border-radius: 6px; background-color: #fff3cd; border: 1px solid #ffeaa7;",4,"ngIf"],[2,"margin-top","20px","padding","15px","border-radius","6px","background-color","#f8f9fa","border","1px solid #dee2e6"],[2,"margin-top","0","color","#495057"],[2,"color","#6c757d","margin","0"],[2,"margin-top","20px","padding","15px","border-radius","6px","background-color","#f8d7da","border","1px solid #f5c6cb"],[2,"margin-top","0","color","#721c24"],[2,"color","#721c24","margin","0"],["style","color: #721c24; margin: 5px 0 0 0; font-size: 12px;",4,"ngIf"],[2,"color","#721c24","margin","5px 0 0 0","font-size","12px"],[2,"margin-top","20px","padding","15px","border-radius","6px","background-color","#d1ecf1","border","1px solid #bee5eb"],[2,"margin-top","0","color","#0c5460"],[2,"color","#0c5460","margin","0","text-align","left","font-size","12px","white-space","pre-wrap"],[2,"color","#495057"],[2,"overflow-x","auto"],[2,"width","100%","border-collapse","collapse","margin-top","15px","background","white","border-radius","8px","overflow","hidden","box-shadow","0 2px 8px rgba(0,0,0,0.1)"],[2,"background-color","#007bff","color","white"],[2,"padding","12px 15px","text-align","left","border-bottom","2px solid #0056b3"],["style","transition: background-color 0.2s;",3,"background-color",4,"ngFor","ngForOf"],[2,"margin-top","15px","text-align","left","padding","10px 15px","background-color","#e9ecef","border-radius","4px"],[2,"margin","0","color","#495057","font-size","14px"],[2,"margin-left","20px"],[2,"transition","background-color 0.2s"],[2,"padding","12px 15px","border-bottom","1px solid #dee2e6","font-weight","bold","color","#495057"],[2,"padding","12px 15px","border-bottom","1px solid #dee2e6","color","#495057"],[2,"padding","12px 15px","border-bottom","1px solid #dee2e6","color","#6c757d","font-size","14px"],[2,"margin-top","20px","padding","20px","border-radius","6px","background-color","#fff3cd","border","1px solid #ffeaa7"],[2,"margin-top","0","color","#856404"],[2,"color","#856404","margin","0"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"h1"),n(2,"testingDB Page - Centralized API"),i(),o(3,"p",1),n(4,"hi how ya doing"),i(),o(5,"p",2),n(6,"This page uses the centralized API endpoint."),i(),o(7,"div",3)(8,"button",4),f("click",function(){return t.onTestButtonClick()})("mouseover",function(){return t.buttonHover=!0})("mouseleave",function(){return t.buttonHover=!1}),n(9),i(),o(10,"button",5),f("click",function(){return t.onGetTestDataClick()}),n(11),i(),g(12,E,5,1,"div",6)(13,k,6,2,"div",7)(14,S,5,1,"div",8)(15,R,26,4,"div",9)(16,A,5,0,"div",10),i()()),e&2&&(r(8),m("background-color",t.buttonHover?"#0056b3":t.isTesting?"#6c757d":"#007bff")("cursor",t.isTesting?"not-allowed":"pointer"),l("disabled",t.isTesting),r(),d(" ",t.isTesting?"Testing...":"Test Database Connection"," "),r(),m("background-color",t.isTesting?"#6c757d":"#28a745")("cursor",t.isTesting?"not-allowed":"pointer"),l("disabled",t.isTesting),r(),d(" ",t.isTesting?"Loading...":"Get Test Data"," "),r(),l("ngIf",t.testResult),r(),l("ngIf",t.apiError),r(),l("ngIf",t.debugInfo),r(),l("ngIf",t.testData.length>0),r(),l("ngIf",t.hasTestDataLoaded&&t.testData.length===0))},dependencies:[_,v,T],encapsulation:2})};export{I as TestingDbComponent};
