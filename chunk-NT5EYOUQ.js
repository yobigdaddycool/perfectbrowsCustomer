import{a as B,b as j,c as z,d as H,e as Q,f as Y,g as G,h as K,i as J,j as X,k as Z,l as $,m as ee,n as te}from"./chunk-TNNGESFX.js";import{b as D,c as A,e as q,j as U}from"./chunk-5X5PDILA.js";import{Ab as W,Ea as k,Ra as u,Sa as g,Wa as M,Xa as o,Y as c,Ya as n,Z as m,Za as E,a as N,ab as y,b as O,bb as f,cb as h,eb as S,fb as T,gb as V,hb as F,ib as L,jb as w,kb as r,lb as R,mb as b,pb as _,qb as C,rb as v,sa as x,tb as I,ua as l,za as P}from"./chunk-FEUBON7T.js";var ne=["videoElement"],oe=["canvasElement"],re=(a,t,i)=>({connected:a,disconnected:t,checking:i});function se(a,t){a&1&&(o(0,"div",12),E(1,"div",60),o(2,"p"),r(3,"Loading customer data..."),n()())}function ae(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.firstName," ")}}function le(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.lastName," ")}}function de(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.phone," ")}}function ce(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.email," ")}}function me(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.stylist," ")}}function pe(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.service," ")}}function ue(a,t){if(a&1&&(o(0,"span",19),r(1),n()),a&2){let i=h();l(),b(" - ",i.fieldErrors.notes)}}function ge(a,t){a&1&&(o(0,"div",37)(1,"div")(2,"div")(3,"strong"),r(4,"No photo captured"),n()(),o(5,"div",35),r(6,"Use camera or upload a photo"),n()()())}function he(a,t){a&1&&(o(0,"div",38),E(1,"video",61,2),n())}function fe(a,t){if(a&1&&(o(0,"div",39),E(1,"img",62),n()),a&2){let i=h();l(),M("src",i.photoPreview,x)}}function _e(a,t){if(a&1&&(o(0,"div",40),E(1,"img",63),n()),a&2){let i=h();l(),M("src",i.capturedPhoto,x)}}function Ce(a,t){if(a&1){let i=y();o(0,"button",54),f("click",function(){c(i);let s=h();return m(s.openCamera())}),r(1," Open Camera "),n(),o(2,"button",54),f("click",function(){c(i);let s=F(5);return m(s.click())}),r(3," Upload Photo "),n(),o(4,"input",64,3),f("change",function(s){c(i);let p=h();return m(p.handleFileUpload(s))}),n()}}function ve(a,t){if(a&1){let i=y();o(0,"button",65),f("click",function(){c(i);let s=h();return m(s.capturePhoto())}),r(1," Capture Photo "),n(),o(2,"button",54),f("click",function(){c(i);let s=h();return m(s.closeCamera())}),r(3," Cancel "),n()}}function be(a,t){if(a&1){let i=y();o(0,"button",65),f("click",function(){c(i);let s=h();return m(s.usePhoto())}),r(1," Use This Photo "),n(),o(2,"button",54),f("click",function(){c(i);let s=h();return m(s.retakePhoto())}),r(3," Retake Photo "),n()}}function we(a,t){if(a&1){let i=y();o(0,"button",54),f("click",function(){c(i);let s=h();return m(s.changePhoto())}),r(1," Change Photo "),n(),o(2,"button",54),f("click",function(){c(i);let s=h();return m(s.removePhoto())}),r(3," Remove Photo "),n()}}function Ee(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.date," ")}}function ye(a,t){if(a&1&&(o(0,"div",19),r(1),n()),a&2){let i=h();l(),b(" ",i.fieldErrors.price," ")}}function Pe(a,t){a&1&&(E(0,"span",66),o(1,"span"),r(2,"Database Connection Successful"),n())}function Me(a,t){a&1&&(E(0,"span",66),o(1,"span"),r(2,"DB Disconnected"),n())}function xe(a,t){a&1&&(E(0,"span",66),o(1,"span"),r(2,"Checking connection..."),n())}var ie=class a{constructor(t,i,e,s){this.http=t;this.cdr=i;this.route=e;this.dbConnection=s}videoElement;canvasElement;isEditMode=!1;customerId=null;isLoadingCustomer=!1;customer={firstName:"",lastName:"",phone:"",email:"",stylist:"",visitType:"New",service:"",notes:"",date:"",time:"",price:"",smsConsent:!1,emailConsent:!1};showToast=!1;toastMessage="";fieldErrors={};flashingFields=new Set;cameraActive=!1;photoPreview=null;capturedPhoto=null;stream=null;cameraError=null;photoFileName=null;apiUrl="https://website-2eb58030.ich.rqh.mybluehost.me/api.php";ngOnInit(){console.log("\u{1F680} RegisterComponent initialized"),this.route.params.subscribe(t=>{let i=t.id;console.log("\u{1F4CB} Route params:",t),console.log("\u{1F194} Customer ID from route:",i),i?(this.isEditMode=!0,this.customerId=+i,console.log("\u270F\uFE0F Edit mode activated for customer ID:",this.customerId),this.loadCustomerData(this.customerId),setTimeout(()=>{this.isLoadingCustomer&&(console.warn("\u26A0\uFE0F Loading timeout - forcing form to show"),this.isLoadingCustomer=!1,this.showToastMessage("Loading took too long. Please check connection."))},1e4)):console.log("\u2795 New customer mode")})}ngOnDestroy(){this.stopCamera()}loadCustomerData(t){this.isLoadingCustomer=!0;let i=`${this.apiUrl}?action=get-customer&customerId=${t}`;console.log("\u{1F50D} Loading customer data for ID:",t),console.log("\u{1F4E1} API URL:",i),this.http.get(i).subscribe({next:e=>{console.log("\u2705 Customer data received:",e),this.isLoadingCustomer=!1,this.cdr.detectChanges(),e.success&&e.data?(console.log("\u{1F4DD} Populating form with customer data..."),this.populateCustomerData(e.data),this.cdr.detectChanges()):(console.error("\u274C Failed to load customer:",e.message),this.showToastMessage("Failed to load customer data: "+e.message))},error:e=>{console.error("\u274C HTTP Error loading customer:",e),console.error("Error details:",{status:e.status,statusText:e.statusText,message:e.message,error:e.error}),this.isLoadingCustomer=!1,this.cdr.detectChanges(),this.showToastMessage("Error loading customer data")}})}populateCustomerData(t){if(this.customer.firstName=t.first_name||"",this.customer.lastName=t.last_name||"",this.customer.phone=t.phone||"",this.customer.email=t.email||"",this.customer.smsConsent=t.sms_consent===1||t.sms_consent===!0,this.customer.emailConsent=t.email_consent===1||t.email_consent===!0,t.last_appointment&&(this.customer.stylist=t.last_appointment.stylist_id||"",this.customer.service=t.last_appointment.service_id||"",this.customer.visitType=t.last_appointment.visit_type||"Return",this.customer.notes=t.last_appointment.notes||"",this.customer.price=t.last_appointment.quoted_price||"",t.last_appointment.appointment_datetime)){let i=new Date(t.last_appointment.appointment_datetime);this.customer.date=i.toISOString().split("T")[0],this.customer.time=i.toTimeString().slice(0,5)}t.profile_photo&&(this.capturedPhoto=`https://website-2eb58030.ich.rqh.mybluehost.me/${t.profile_photo}`),console.log("Customer data populated:",this.customer)}onSubmit(){this.fieldErrors={};let t=this.validateForm();if(Object.keys(t).length>0){this.fieldErrors=t,this.showToastMessage("Please fix the errors in the form."),this.triggerFlashAnimation(Object.keys(t));return}this.isEditMode&&this.customerId?this.updateCustomer():this.createCustomer()}createCustomer(){console.log("Creating new customer:",this.customer),this.showToastMessage("Customer saved successfully!")}updateCustomer(){console.log("\u{1F4BE} Updating customer ID:",this.customerId),console.log("\u{1F4CB} Current customer data:",this.customer),console.log("\u{1F4F8} Captured photo exists?",!!this.capturedPhoto);let t={customerId:this.customerId,firstName:this.customer.firstName,lastName:this.customer.lastName,phone:this.customer.phone,email:this.customer.email,smsConsent:this.customer.smsConsent?1:0,emailConsent:this.customer.emailConsent?1:0};if(this.capturedPhoto){t.photo=this.capturedPhoto;let s=this.capturedPhoto.substring(0,100)+"...";console.log("\u{1F4F8} Including photo in update (preview):",s),console.log("\u{1F4F8} Photo length:",this.capturedPhoto.length,"characters")}else console.log("\u26A0\uFE0F No photo to include");let i=`${this.apiUrl}?action=update-customer`;console.log("\u{1F4E1} Sending update to:",i),console.log("\u{1F4E6} Update data:",O(N({},t),{photo:t.photo?"[BASE64_DATA]":void 0}));let e="Update Customer";this.isLoadingCustomer=!0,this.http.post(i,t).subscribe({next:s=>{console.log("\u2705 Update response:",s),console.log("\u{1F504} Setting isLoadingCustomer to FALSE"),this.isLoadingCustomer=!1,s.success?(s.data?.photoPath&&(this.capturedPhoto=`https://website-2eb58030.ich.rqh.mybluehost.me/${s.data.photoPath}`,console.log("\u{1F4F8} Photo updated:",s.data.photoPath)),console.log("\u{1F504} Triggering change detection"),this.cdr.detectChanges(),setTimeout(()=>{this.showToastMessage("Customer updated successfully!"),console.log("\u2705 Customer updated successfully")},0)):(this.cdr.detectChanges(),this.showToastMessage("Failed to update customer: "+s.message),console.error("\u274C Update failed:",s.message))},error:s=>{console.error("\u274C HTTP Error updating customer:",s),console.log("\u{1F504} Setting isLoadingCustomer to FALSE (error)"),this.isLoadingCustomer=!1,this.cdr.detectChanges(),setTimeout(()=>{this.showToastMessage("Error updating customer. Please try again.")},0)}})}onClear(){this.customer={firstName:"",lastName:"",phone:"",email:"",stylist:"",visitType:"New",service:"",notes:"",date:"",time:"",price:"",smsConsent:!1,emailConsent:!1},this.fieldErrors={},this.flashingFields.clear()}validateForm(){let t={};return this.customer.firstName?.trim()?this.customer.firstName.length<2&&(t.firstName="First name must be at least 2 characters"):t.firstName="First name is required",this.customer.lastName?.trim()?this.customer.lastName.length<2&&(t.lastName="Last name must be at least 2 characters"):t.lastName="Last name is required",this.customer.phone?.trim()?this.isValidPhone(this.customer.phone)||(t.phone="Please enter a valid phone number"):t.phone="Phone number is required",this.customer.date?.trim()?this.isValidDate(this.customer.date)||(t.date="Please enter a valid date"):t.date="Date is required",this.customer.stylist||(t.stylist="Please select a stylist"),this.customer.service||(t.service="Please select a service"),this.customer.email&&!this.isValidEmail(this.customer.email)&&(t.email="Please enter a valid email address"),this.customer.price&&!this.isValidPrice(this.customer.price)&&(t.price="Please enter a valid price (e.g., 29.99)"),this.customer.notes&&this.customer.notes.length>500&&(t.notes="Notes cannot exceed 500 characters"),t}triggerFlashAnimation(t){this.flashingFields.clear(),t.forEach(i=>this.flashingFields.add(i)),setTimeout(()=>{this.flashingFields.clear()},4500)}isFlashing(t){return this.flashingFields.has(t)}validateField(t,i){switch(t){case"firstName":i?.trim()?i.length<2?this.fieldErrors.firstName="First name must be at least 2 characters":delete this.fieldErrors.firstName:this.fieldErrors.firstName="First name is required";break;case"lastName":i?.trim()?i.length<2?this.fieldErrors.lastName="Last name must be at least 2 characters":delete this.fieldErrors.lastName:this.fieldErrors.lastName="Last name is required";break;case"email":i&&!this.isValidEmail(i)?this.fieldErrors.email="Please enter a valid email address":delete this.fieldErrors.email;break;case"phone":i?.trim()?this.isValidPhone(i)?delete this.fieldErrors.phone:this.fieldErrors.phone="Please enter a valid phone number":this.fieldErrors.phone="Phone number is required";break;case"date":i?.trim()?this.isValidDate(i)?delete this.fieldErrors.date:this.fieldErrors.date="Please enter a valid date":this.fieldErrors.date="Date is required";break;case"price":i&&!this.isValidPrice(i)?this.fieldErrors.price="Please enter a valid price":delete this.fieldErrors.price;break}}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}isValidPhone(t){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(t.replace(/\s/g,""))}isValidDate(t){let i=new Date(t),e=new Date;return e.setHours(0,0,0,0),i>=e}isValidPrice(t){let i=parseFloat(t);return!isNaN(i)&&i>0}showToastMessage(t){this.toastMessage=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},3e3)}hasErrors(){return Object.keys(this.fieldErrors).length>0}hideToast(){this.showToast=!1}async openCamera(){this.cameraError=null;try{this.stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}}),this.cameraActive=!0,this.cdr.detectChanges(),this.startVideoPlayback()}catch(t){console.error("Camera access error:",t),this.cameraError="Unable to access camera. Please check permissions.",t.name==="NotAllowedError"?this.cameraError="Camera access denied. Please allow camera permissions.":t.name==="NotFoundError"&&(this.cameraError="No camera found on this device."),this.showToastMessage(this.cameraError)}}startVideoPlayback(t=0){setTimeout(()=>{if(this.videoElement&&this.stream){let i=this.videoElement.nativeElement;i.srcObject=this.stream,i.play().catch(e=>{console.error("Error playing video:",e),t<1&&this.startVideoPlayback(t+1)})}else t<5?this.startVideoPlayback(t+1):(console.error("Video element not available after retries"),this.cameraError="Failed to initialize camera display",this.showToastMessage(this.cameraError))},100)}capturePhoto(){if(!this.videoElement||!this.canvasElement)return;let t=this.videoElement.nativeElement,i=this.canvasElement.nativeElement;i.width=t.videoWidth,i.height=t.videoHeight;let e=i.getContext("2d");e&&(e.drawImage(t,0,0,i.width,i.height),this.photoPreview=i.toDataURL("image/jpeg",.8))}usePhoto(){console.log("\u{1F4F8} Using captured photo"),console.log("\u{1F4F8} Photo preview length:",this.photoPreview?.length),this.capturedPhoto=this.photoPreview,console.log("\u{1F4F8} Captured photo set, length:",this.capturedPhoto?.length),this.closeCamera(),this.showToastMessage("Photo captured successfully!"),this.cdr.detectChanges()}retakePhoto(){this.photoPreview=null,this.startVideoPlayback()}changePhoto(){this.openCamera()}removePhoto(){this.capturedPhoto=null,this.photoPreview=null,this.photoFileName=null}closeCamera(){this.stopCamera(),this.cameraActive=!1,this.photoPreview=null}stopCamera(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null)}handleFileUpload(t){let i=t.target;if(i.files&&i.files[0]){let e=i.files[0];if(!e.type.startsWith("image/")){this.showToastMessage("Please select a valid image file.");return}if(e.size>5*1024*1024){this.showToastMessage("Image size must be less than 5MB.");return}let s=new FileReader;s.onload=p=>{this.capturedPhoto=p.target.result,this.photoFileName=e.name,this.showToastMessage("Photo uploaded successfully!")},s.readAsDataURL(e)}}static \u0275fac=function(i){return new(i||a)(P(q),P(W),P(U),P(te))};static \u0275cmp=k({type:a,selectors:[["app-register"]],viewQuery:function(i,e){if(i&1&&(S(ne,5),S(oe,5)),i&2){let s;T(s=V())&&(e.videoElement=s.first),T(s=V())&&(e.canvasElement=s.first)}},decls:148,vars:83,consts:[["customerForm","ngForm"],["canvasElement",""],["videoElement",""],["fileInput",""],[1,"wrap"],["role","region","aria-label","Customer Intake",1,"card"],[1,"header"],[1,"brand"],["aria-hidden","true",1,"logo"],[1,"badges"],[1,"chip"],[1,"content",3,"ngSubmit"],[1,"loading-state",2,"text-align","center","padding","40px"],[1,"grid"],[1,"col"],[1,"row"],[1,"field"],["for","firstName",1,"req"],["id","firstName","type","text","name","firstName","placeholder","e.g., Ayesha","required","",3,"ngModelChange","blur","ngModel"],[1,"error-message"],["for","lastName",1,"req"],["id","lastName","type","text","name","lastName","placeholder","e.g., Khan","required","",3,"ngModelChange","blur","ngModel"],["for","phone",1,"req"],["id","phone","type","tel","name","phone","placeholder","(555) 123\u20114567",3,"ngModelChange","blur","ngModel"],["for","email"],["id","email","type","email","name","email","placeholder","name@example.com",3,"ngModelChange","blur","ngModel"],["for","stylist",1,"req"],["id","stylist","name","stylist","required","",3,"ngModelChange","ngModel"],["value","","selected","","disabled",""],["for","visitType"],["id","visitType","name","visitType",3,"ngModelChange","ngModel"],["for","service",1,"req"],["id","service","name","service","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Allergies, preferences, reference look, etc.",3,"ngModelChange","ngModel"],[1,"help"],[1,"photo-box"],[1,"placeholder"],[1,"camera-container"],[1,"photo-preview"],[1,"photo-captured"],[2,"display","none"],[1,"row",2,"margin-top","10px","gap","8px"],["for","date",1,"req"],["id","date","type","date","name","date",3,"ngModelChange","blur","ngModel"],["for","time"],["id","time","type","time","name","time",3,"ngModelChange","ngModel"],["for","price"],["id","price","type","number","name","price","inputmode","decimal","placeholder","e.g., 29.99","step","0.01",3,"ngModelChange","blur","ngModel"],[1,"row",2,"gap","8px"],[2,"display","flex","align-items","center","gap","8px"],["type","checkbox","name","smsConsent",3,"ngModelChange","ngModel"],["type","checkbox","name","emailConsent",3,"ngModelChange","ngModel"],[1,"actions"],["type","button",1,"btn","btn-outline",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"connection-status-container"],[1,"connection-status",3,"ngClass"],[1,"subtle"],["role","status","aria-live","polite",1,"toast",3,"click"],[1,"spinner",2,"margin","0 auto 20px"],["autoplay","","playsinline","",1,"camera-video"],["alt","Photo preview",3,"src"],["alt","Captured photo",3,"src"],["type","file","accept","image/*",2,"display","none",3,"change"],["type","button",1,"btn","btn-primary",3,"click"],[1,"status-dot"]],template:function(i,e){if(i&1){let s=y();o(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),E(4,"div",8),o(5,"h1"),r(6),n()(),o(7,"div",9)(8,"span",10),r(9),n(),o(10,"span",10),r(11,"Angular App"),n(),o(12,"span",10),r(13,"Magenta Theme"),n()()(),o(14,"form",11,0),f("ngSubmit",function(){return c(s),m(e.onSubmit())}),u(16,se,4,0,"div",12),o(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"label",17),r(22,"First Name"),n(),o(23,"input",18),v("ngModelChange",function(d){return c(s),C(e.customer.firstName,d)||(e.customer.firstName=d),m(d)}),f("blur",function(){return c(s),m(e.validateField("firstName",e.customer.firstName))}),n(),u(24,ae,2,1,"div",19),n(),o(25,"div",16)(26,"label",20),r(27,"Last Name"),n(),o(28,"input",21),v("ngModelChange",function(d){return c(s),C(e.customer.lastName,d)||(e.customer.lastName=d),m(d)}),f("blur",function(){return c(s),m(e.validateField("lastName",e.customer.lastName))}),n(),u(29,le,2,1,"div",19),n()(),o(30,"div",15)(31,"div",16)(32,"label",22),r(33,"Phone"),n(),o(34,"input",23),v("ngModelChange",function(d){return c(s),C(e.customer.phone,d)||(e.customer.phone=d),m(d)}),f("blur",function(){return c(s),m(e.validateField("phone",e.customer.phone))}),n(),u(35,de,2,1,"div",19),n(),o(36,"div",16)(37,"label",24),r(38,"Email"),n(),o(39,"input",25),v("ngModelChange",function(d){return c(s),C(e.customer.email,d)||(e.customer.email=d),m(d)}),f("blur",function(){return c(s),m(e.validateField("email",e.customer.email))}),n(),u(40,ce,2,1,"div",19),n()(),o(41,"div",15)(42,"div",16)(43,"label",26),r(44,"Stylist"),n(),o(45,"select",27),v("ngModelChange",function(d){return c(s),C(e.customer.stylist,d)||(e.customer.stylist=d),m(d)}),o(46,"option",28),r(47,"Select stylist\u2026"),n(),o(48,"option"),r(49,"Any Available"),n(),o(50,"option"),r(51,"Anna"),n(),o(52,"option"),r(53,"Layla"),n(),o(54,"option"),r(55,"Maria"),n(),o(56,"option"),r(57,"Nora"),n()(),u(58,me,2,1,"div",19),n(),o(59,"div",16)(60,"label",29),r(61,"Visit Type"),n(),o(62,"select",30),v("ngModelChange",function(d){return c(s),C(e.customer.visitType,d)||(e.customer.visitType=d),m(d)}),o(63,"option"),r(64,"New"),n(),o(65,"option"),r(66,"Returning"),n(),o(67,"option"),r(68,"Walk\u2011in"),n()()()(),o(69,"div",16)(70,"label",31),r(71,"Service"),n(),o(72,"select",32),v("ngModelChange",function(d){return c(s),C(e.customer.service,d)||(e.customer.service=d),m(d)}),o(73,"option",28),r(74,"Select a service\u2026"),n(),o(75,"option"),r(76,"Threading"),n(),o(77,"option"),r(78,"Waxing"),n(),o(79,"option"),r(80,"Tinting"),n(),o(81,"option"),r(82,"Lashes"),n(),o(83,"option"),r(84,"Facial"),n()(),u(85,pe,2,1,"div",19),n(),o(86,"div",16)(87,"label",33),r(88,"Notes"),n(),o(89,"textarea",34),v("ngModelChange",function(d){return c(s),C(e.customer.notes,d)||(e.customer.notes=d),m(d)}),n(),o(90,"div",35),r(91),u(92,ue,2,1,"span",19),n()()(),o(93,"div",14)(94,"div",16)(95,"label"),r(96,"Customer Photo"),n(),o(97,"div",36),u(98,ge,7,0,"div",37),u(99,he,3,0,"div",38),u(100,fe,2,1,"div",39),u(101,_e,2,1,"div",40),E(102,"canvas",41,1),n(),o(104,"div",42),u(105,Ce,6,0),u(106,ve,4,0),u(107,be,4,0),u(108,we,4,0),n()(),o(109,"div",15)(110,"div",16)(111,"label",43),r(112,"Date"),n(),o(113,"input",44),v("ngModelChange",function(d){return c(s),C(e.customer.date,d)||(e.customer.date=d),m(d)}),f("blur",function(){return c(s),m(e.validateField("date",e.customer.date))}),n(),u(114,Ee,2,1,"div",19),n(),o(115,"div",16)(116,"label",45),r(117,"Time"),n(),o(118,"input",46),v("ngModelChange",function(d){return c(s),C(e.customer.time,d)||(e.customer.time=d),m(d)}),n()()(),o(119,"div",16)(120,"label",47),r(121,"Quoted Price"),n(),o(122,"input",48),v("ngModelChange",function(d){return c(s),C(e.customer.price,d)||(e.customer.price=d),m(d)}),f("blur",function(){return c(s),m(e.validateField("price",e.customer.price))}),n(),u(123,ye,2,1,"div",19),n(),o(124,"div",16)(125,"label"),r(126,"Consent"),n(),o(127,"div",49)(128,"label",50)(129,"input",51),v("ngModelChange",function(d){return c(s),C(e.customer.smsConsent,d)||(e.customer.smsConsent=d),m(d)}),n(),r(130," SMS reminders "),n(),o(131,"label",50)(132,"input",52),v("ngModelChange",function(d){return c(s),C(e.customer.emailConsent,d)||(e.customer.emailConsent=d),m(d)}),n(),r(133," Email updates "),n()()()()(),o(134,"div",53)(135,"button",54),f("click",function(){return c(s),m(e.onClear())}),r(136,"Clear"),n(),o(137,"button",55),r(138),n()(),o(139,"div",56)(140,"div",57),u(141,Pe,3,0)(142,Me,3,0)(143,xe,3,0),n(),o(144,"p",58),r(145,"Angular Application \u2022 Full form validation enabled"),n()()()()(),o(146,"div",59),f("click",function(){return c(s),m(e.hideToast())}),r(147),n()}i&2&&(l(6),R(e.isEditMode?"Edit Customer":"Register New Customer"),l(3),R(e.isEditMode?"Edit Mode":"Landing \u2014 Register"),l(7),g(e.isLoadingCustomer?16:-1),l(),L("display",e.isLoadingCustomer?"none":"grid"),l(6),w("error",e.fieldErrors.firstName)("flash-error",e.isFlashing("firstName")),_("ngModel",e.customer.firstName),l(),g(e.fieldErrors.firstName?24:-1),l(4),w("error",e.fieldErrors.lastName)("flash-error",e.isFlashing("lastName")),_("ngModel",e.customer.lastName),l(),g(e.fieldErrors.lastName?29:-1),l(5),w("error",e.fieldErrors.phone)("flash-error",e.isFlashing("phone")),_("ngModel",e.customer.phone),l(),g(e.fieldErrors.phone?35:-1),l(4),w("error",e.fieldErrors.email)("flash-error",e.isFlashing("email")),_("ngModel",e.customer.email),l(),g(e.fieldErrors.email?40:-1),l(5),w("error",e.fieldErrors.stylist)("flash-error",e.isFlashing("stylist")),_("ngModel",e.customer.stylist),l(13),g(e.fieldErrors.stylist?58:-1),l(4),_("ngModel",e.customer.visitType),l(10),w("error",e.fieldErrors.service)("flash-error",e.isFlashing("service")),_("ngModel",e.customer.service),l(13),g(e.fieldErrors.service?85:-1),l(4),w("error",e.fieldErrors.notes)("flash-error",e.isFlashing("notes")),_("ngModel",e.customer.notes),l(2),b(" ",e.customer.notes.length||0,"/500 characters "),l(),g(e.fieldErrors.notes?92:-1),l(6),g(!e.cameraActive&&!e.photoPreview&&!e.capturedPhoto?98:-1),l(),g(e.cameraActive&&!e.photoPreview?99:-1),l(),g(e.photoPreview?100:-1),l(),g(e.capturedPhoto&&!e.cameraActive?101:-1),l(4),g(!e.cameraActive&&!e.capturedPhoto?105:-1),l(),g(e.cameraActive&&!e.photoPreview?106:-1),l(),g(e.photoPreview?107:-1),l(),g(e.capturedPhoto&&!e.cameraActive?108:-1),l(5),w("error",e.fieldErrors.date)("flash-error",e.isFlashing("date")),_("ngModel",e.customer.date),l(),g(e.fieldErrors.date?114:-1),l(4),_("ngModel",e.customer.time),l(4),w("error",e.fieldErrors.price)("flash-error",e.isFlashing("price")),_("ngModel",e.customer.price),l(),g(e.fieldErrors.price?123:-1),l(6),_("ngModel",e.customer.smsConsent),l(3),_("ngModel",e.customer.emailConsent),l(5),M("disabled",e.isLoadingCustomer),l(),b(" ",e.isEditMode?"Update Customer":"Save Customer"," "),l(2),M("ngClass",I(79,re,e.dbConnection.connectionStatus()==="connected",e.dbConnection.connectionStatus()==="disconnected",e.dbConnection.connectionStatus()==="checking")),l(),g(e.dbConnection.connectionStatus()==="connected"?141:e.dbConnection.connectionStatus()==="disconnected"?142:143),l(5),w("show",e.showToast),l(),b(" ",e.toastMessage,`
`))},dependencies:[ee,G,X,Z,j,K,B,J,z,H,$,Y,Q,A,D],styles:['.wrap[_ngcontent-%COMP%]{padding:16px}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:16px;box-shadow:0 10px 25px #11182714}.header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;padding:14px 18px;background:linear-gradient(180deg,#d946ef1f,#d946ef00);border-bottom:1px solid #e5e7eb}.brand[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.badges[_ngcontent-%COMP%]{display:flex;gap:8px}.chip[_ngcontent-%COMP%]{padding:4px 8px;border-radius:999px;border:1px solid #e5e7eb;color:#374151;font-size:12px}.content[_ngcontent-%COMP%]{padding:18px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.row[_ngcontent-%COMP%]{display:flex;gap:16px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}label[_ngcontent-%COMP%]{font-weight:500;color:#374151}label.req[_ngcontent-%COMP%]:after{content:" *";color:#d946ef}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #d1d5db;border-radius:8px;font-size:14px}input.error[_ngcontent-%COMP%], select.error[_ngcontent-%COMP%], textarea.error[_ngcontent-%COMP%]{border-color:#ef4444}input.flash-error[_ngcontent-%COMP%], select.flash-error[_ngcontent-%COMP%], textarea.flash-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flash-error .5s ease-in-out 3}@keyframes _ngcontent-%COMP%_flash-error{0%,to{border-color:#d1d5db}50%{border-color:#ef4444}}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:12px}.help[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.photo-box[_ngcontent-%COMP%]{border:2px dashed #d1d5db;border-radius:8px;padding:24px;text-align:center;color:#6b7280}.actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;border:1px solid #d1d5db;background:#fff;color:#374151;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#d946ef;color:#fff;border-color:#d946ef}.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#374151;border-color:#d1d5db}.subtle[_ngcontent-%COMP%]{color:#6b7280;font-size:12px;text-align:center;margin-top:24px}.toast[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;padding:12px 16px;background:#d946ef;color:#fff;border-radius:8px;box-shadow:0 10px 25px #11182733;opacity:0;transform:translateY(100%);transition:opacity .3s,transform .3s;cursor:pointer}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.photo-box[_ngcontent-%COMP%]{min-height:240px;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.camera-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.camera-video[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:6px;background:#000}.photo-preview[_ngcontent-%COMP%], .photo-captured[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .photo-captured[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:6px;object-fit:contain}.btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);transition:all .2s}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.photo-box[_ngcontent-%COMP%]{min-height:200px}.camera-video[_ngcontent-%COMP%]{max-height:300px}}.connection-status-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;flex-wrap:wrap;gap:12px}.connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:11px;font-weight:500;padding:4px 8px;border-radius:4px;transition:all .3s ease}.connection-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}.connection-status.connected[_ngcontent-%COMP%]{color:#059669;background-color:#d1fae5}.connection-status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#059669}.connection-status.disconnected[_ngcontent-%COMP%]{color:#dc2626;background-color:#fee2e2}.connection-status.disconnected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#dc2626;animation:_ngcontent-%COMP%_pulse-error 1s infinite}.connection-status.checking[_ngcontent-%COMP%]{color:#6b7280;background-color:#f3f4f6}.connection-status.checking[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#6b7280}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_pulse-error{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}']})};export{ie as RegisterComponent};
